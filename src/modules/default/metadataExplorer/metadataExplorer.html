<template>
  <div class="slds-p-around_medium slds-text-color_default">
    <h1 class="slds-text-heading_large">Metadata Explorer</h1>

    <template lwc:if={orgConnectionInfo}>
      <p>URL: {orgConnectionInfo.result.instanceUrl}</p>
      <p>username: {orgConnectionInfo.result.username}</p>
      <p>orgName: {orgConnectionInfo.result.orgName}</p>
      <p>edition: {orgConnectionInfo.result.edition}</p>
    </template>

    <template lwc:if={metadataTypeOptions}>
      <lightning-combobox
        name="selectedMetadataType"
        label="Select Metadata Type"
        value={selectedMetadataType}
        options={metadataTypeOptions}
        onchange={handleMetadataTypeSelection}
        onsort={updateColumnSorting}
      ></lightning-combobox>
    </template>

    <template lwc:if={sortedMetadataOfSelectedType}>
      <div style="height: 300px" class="slds-m-around_medium">
        <lightning-datatable
          key-field="fullName"
          data={sortedMetadataOfSelectedType}
          columns={columns}
          sorted-by={sortedBy}
          onsort={updateColumnSorting}
        >
        </lightning-datatable>
      </div>
    </template>

    <template lwc:if={error}>
      <div class="slds-p-around_medium">
        <p>Error:</p>
        <pre class="slds-box slds-text-font_monospace">{error}</pre>
      </div>
    </template>

    <template lwc:if={showSpinner}>
      <default-spinner></default-spinner>
    </template>
  </div>
</template>
